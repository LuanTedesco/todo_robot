<div class="d-grid gap-2 mb-3">
  <%= link_to "Novo", new_task_path, "data-controller":"task-modal", class: 'btn btn-primary' %>
</div>
<%= form_with model: Task.new, url: fast_task_path, method: :post do |f| %>
  <div class="input-group mb-3">
    <%= f.text_field :title, class: 'form-control', placeholder: 'Descreva' %>
    <%= f.submit 'Adicionar', class: 'btn btn-primary' %>
  </div>
<% end %>
<table class="table table-hover">
  <thead>
    <th></th>
    <th>Titulo</th>
    <th>Data de in√≠cio</th>
    <th>Data de fim</th>
    <th>Prioridade</th>
    <th>Status</th>
    <th>Tipo</th>
    <th></th>
  </thead>
  <tbody>
    <% @tasks.each do |task| %>
      <tr>
        <td>
          <div class="form-check">
            <%= form_with model: task, class:"form_task " do |f| %>
              <%= f.check_box :finished, class: 'checkbox-toggle form-check-input ml-2' %>
            <% end %>
          </div>
        </td>
        <td class="text-truncate" style="max-width: 300px;"><%= task.title %></td>
        <td><%= task.start_date.strftime("%d/%m/%Y") %></td>
        <td><%= task.end_date.strftime("%d/%m/%Y") %></td>
        <td><%= task.priority %></td>
        <td><%= task.status %></td>
        <td><%= task.typetask %></td>
        <td class="text-right">
          <%= link_to "Editar", edit_task_path(task), "data-controller":"task-modal", class: 'btn btn-primary' %>
          <%= link_to "Excluir", task_path(task), method: :delete, class: 'btn btn-danger', data: { turbo_method: :delete, turbo_confirm: 'Deseja realmente excluir?' } %>
        </td>
      </tr>
    <% end %>
    <script src="./task/toggleTask.js"></script>
  </tbody>
</table>
