<div class="d-sm-flex align-items-center justify-content-between mb-3">
  <%= link_to "Novo", new_task_path, "data-controller":"task-modal", class: 'btn btn-primary' %>
  <%= form_tag tasks_path, class: 'd-sm-flex', method: :get do %>
    <div class="ml-2">
      <%= text_field_tag :filter_title, params[:filter_title], class: 'form-control', placeholder: 'Titulo' %>
    </div>
    <div class="ml-2">
      <%= text_field_tag :filter_start_date, params[:filter_start_date], class: 'form-control', placeholder: 'Data de inicio' %>
    </div>
    <div class="ml-2">
      <%= text_field_tag :filter_end_date, params[:filter_end_date], class: 'form-control', placeholder: 'Data de termino' %>
    </div>
    <div class="ml-2">
      <%= select_tag :filter_priority, options_for_select(Task.priorities.map { |key, value| [value.humanize, key] }, params[:filter_priority]), include_blank: 'Prioridade', class: 'form-control' %>
    </div>
    <div class="ml-2">
      <%= select_tag :filter_status, options_for_select(Task.statuses.map { |key, value| [value.humanize, key] }, params[:filter_status]), include_blank: 'Status', class: 'form-control' %>
    </div>
    <div class="ml-2 mr-2">
      <%= select_tag :filter_typetask, options_for_select(Task.typetasks.map { |key, value| [value.humanize, key] }, params[:filter_typetask]), include_blank: 'Tipo', class: 'form-control' %>
    </div>
    <%= submit_tag 'Filtrar', class: 'btn btn-primary' %>
  <% end %>
</div>
<%= form_with model: Task.new, url: fast_task_path, method: :post do |f| %>
  <div class="input-group mb-3">
    <%= f.text_field :title, class: 'form-control', placeholder: 'Descreva' %>
    <div class="input-group-prepend">
      <%= f.submit 'Adicionar', class: 'btn btn-primary' %>
    </div>
  </div>
<% end %>
<table class="table table-hover">
  <thead>
    <th></th>
    <th>Titulo</th>
    <th>Data de in√≠cio</th>
    <th>Data de fim</th>
    <th>Prioridade</th>
    <th>Status</th>
    <th>Tipo</th>
    <th></th>
  </thead>
  <tbody>
    <% @tasks.each do |task| %>
      <tr>
        <td>
          <div class="form-check">
            <%= form_with model: task, class:"form_task " do |f| %>
              <%= f.check_box :finished, class: 'checkbox-toggle form-check-input ml-2' %>
            <% end %>
          </div>
        </td>
        <td class="text-truncate" style="max-width: 300px;"><%= task.title %></td>
        <td><%= task.start_date.strftime("%d/%m/%Y") %></td>
        <td><%= task.end_date.strftime("%d/%m/%Y") %></td>
        <td><%= task.priority %></td>
        <td><%= task.status %></td>
        <td><%= task.typetask %></td>
        <td class="text-right">
          <%= link_to "Editar", edit_task_path(task), "data-controller":"task-modal", class: 'btn btn-primary' %>
          <%= link_to "Excluir", task_path(task), method: :delete, class: 'btn btn-danger', data: { turbo_method: :delete, turbo_confirm: 'Deseja realmente excluir?' } %>
        </td>
      </tr>
    <% end %>
    <script src="./task/toggleTask.js"></script>
  </tbody>
</table>
